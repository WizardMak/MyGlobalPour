<!DOCTYPE html>
<html>
<head>
    <title>My Global Pour | Collection</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü•É</text></svg>">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; background: #001f3f; overflow: hidden; }
        
        #sidebar {
            position: absolute; left: -320px; top: 0; width: 300px; height: 100vh; 
            background: #fdfbf7; border-right: 1px solid #d7ccc8; overflow-y: auto; 
            padding: 20px; box-sizing: border-box; z-index: 2000;
            transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 5px 0 15px rgba(0,0,0,0.5);
        }
        #sidebar.open { left: 0; }
        
        #map { height: 100vh; width: 100vw; background: #001f3f; }
        
        #toggle-btn {
            position: absolute; top: 15px; left: 15px; z-index: 2500;
            background: #5d4037; color: white; border: none; padding: 12px 20px;
            border-radius: 50px; cursor: pointer; font-weight: bold; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.4);
        }

        /* Animated Header */
        .header-container {
            position: absolute; top: 15px; left: 50%; transform: translateX(-50%); z-index: 1000;
            background: rgba(255, 255, 255, 0.95); padding: 10px 40px; border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); text-align: center; pointer-events: none;
            white-space: nowrap; transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .header-container.hidden { opacity: 0; transform: translate(-50%, -20px); }
        .header-container h1 { margin: 0; font-size: 22px; pointer-events: auto; }

        .emoji-marker {
            background: white; border: 2px solid #5d4037; border-radius: 50%;
            text-align: center; line-height: 30px; font-size: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        }

        .tasting-card { padding: 10px; min-width: 250px; text-align: center; }
        .tasting-card h2 { margin: 0; font-size: 20px; color: #5d4037; text-transform: uppercase; font-weight: 800; }
        .sub-header { font-size: 13px; color: #8d6e63; font-weight: 600; margin: 4px 0 10px 0; line-height: 1.4; }
        .one-liner-text { font-style: italic; font-size: 12px; color: #7f8c8d; font-weight: normal; }
        .region-country { font-size: 14px; color: #333; font-weight: 500; margin: 8px 0; }
        .tasting-card p { margin: 12px 0; font-size: 14px; line-height: 1.5; color: #444; text-align: left; border-top: 1px solid #eee; padding-top: 10px; }
        
        .status-badge { font-size: 11px; font-weight: bold; padding: 4px 12px; border-radius: 20px; text-transform: uppercase; display: inline-block; }
        .in-my-bar { background: #2e7d32; color: white; }
        .my-wishlist { background: #d32f2f; color: white; }

        .zoom-btn {
            display: block; width: 100%; padding: 12px; margin: 8px 0;
            background: #fff; border: 1px solid #d7ccc8; border-radius: 8px;
            text-align: left; cursor: pointer; color: #5d4037; font-weight: bold; font-size: 13px;
        }
    </style>
</head>
<body>

    <button id="toggle-btn" onclick="toggleSidebar()">‚ò∞ MyCollectionList</button>

    <div id="sidebar">
        <div style="margin-top: 50px; border-bottom: 2px solid #d7ccc8; padding-bottom: 15px; margin-bottom: 20px;">
            <h2 style="color: #5d4037; margin: 0;">üçæ My Collection</h2>
            <select id="categoryFilter" onchange="filterAll()" style="width:100%; padding:10px; margin-top:15px; border-radius:8px;">
                <option value="All">All Categories</option>
                <option value="Whiskey">Whiskey</option>
                <option value="Gin">Gin</option>
                <option value="Rum">Rum</option>
                <option value="Tequila">Tequila</option>
                <option value="Vodka">Vodka</option>
                <option value="Brandy">Brandy</option>
            </select>
        </div>
        <div id="stats-display" style="font-size:13px; color:#8d6e63; margin-bottom:20px;">Loading Collection...</div>
        <div id="zoom-controls"></div>
    </div>

    <div id="main-header" class="header-container">
        <h1>üó∫Ô∏è My Global Pour ü•É</h1>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const spiritData = {
            "Vodka": { emoji: "üç∏", text: "A versatile, often neutral spirit made from grains or potatoes." },
            "Gin": { emoji: "üåø", text: "A neutral spirit flavored with juniper berries and botanical ingredients." },
            "Rum": { emoji: "üè¥‚Äç‚ò†Ô∏è", text: "Distilled from sugarcane byproducts like molasses or sugarcane juice." },
            "Tequila": { emoji: "üåµ", text: "A Mexican spirit distilled specifically from the blue agave plant." },
            "Whiskey": { emoji: "ü•É", text: "Distilled from fermented grain mash (barley, corn, rye, or wheat)." },
            "Brandy": { emoji: "üçá", text: "A spirit distilled from fermented fruit juice, most commonly grapes." }
        };

        var allData = [];
        var map = L.map('map', { 
            zoomControl: false, minZoom: 2, zoomSnap: 0.1,
            maxBounds: [[-85, -180], [85, 180]], maxBoundsViscosity: 1.0, worldCopyJump: false
        }).setView([20, 0], 2.8);

        L.control.zoom({ position: 'bottomright' }).addTo(map);
